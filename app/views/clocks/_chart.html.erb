<div id="times">
  <div id="chart">
    <a href="http://www.adobe.com/go/getflashplayer">
      <img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" />
    </a>
  </div>
  <div id="slider"><div class="ui-slider-handle"></div></div>
  <input id="user_name" type="text"/>
</div>

<%- content_for :head, javascript_tag("swfobject.embedSWF('/movies/chart.swf', 'chart', '750', '400', '9.0.28.0', '/movies/expressInstall.swf', {dataUrl: '#{formatted_averages_path :xml, :puzzle => params[:puzzle]}'}, {wmode: 'transparent'});") -%>
<%- javascript_tag do -%>
  $('#slider').slider();
  $("#user_name").autocomplete({
    ajax: "<%= formatted_auto_complete_for_user_name_clocks_path(:js, :puzzle => params[:puzzle]) %>",
    match: function(typed) { return this.name.match(new RegExp(typed)); },
    insertText: function(user) { return user.name }
  })
  .bind("activate.autocomplete", function(e, d) { document.getElementById("chart").addSeries(d.url) });
<%- end -%>