<!--
if current_user? show his matches, otherwise show recent matches
-->
<% if logged_in? %>
<% if @challenged_matches.empty? and @awaiting_matches.empty? %>
<p class="challenge">
  You don&#39;t have any open matches:<br/>
  <%= link_to 'Go and challenge another cuber!', users_path %>
</p>
<% else %>
<h1>You&#39;ve been challenged by</h1>
<ul>
  <%= render :partial => 'match', :collection => @challenged_matches %>
</ul>
<h1>You&#39;ve challenged</h1>
<ul>
  <%= render :partial => 'match', :collection => @awaiting_matches %>
</ul>
<% end %>
<% unless @finished_matches.empty? %>
<h1>Recent finished matches</h1>
<ul>
  <%= render :partial => 'match', :collection => @finished_matches %>
</ul>
<% end %>
<% else %>
<h1>Recent matches</h1>
<ul>
<% for match in @matches %>
  <li>
    <%= link_to "#{match.user.name} vs. #{match.opponent.name}", puzzle_match_path(match.puzzle, match) %>
    <small><%= match.puzzle.name %> <%= match.puzzle.kind.name %></small>
    <%= result_tag match.user_points %>
    <%= result_tag match.opponent_points %>
  </li>
<% end %>
</ul>
<% end %>